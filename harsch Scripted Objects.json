{
  "SaveName": "",
  "Date": "",
  "VersionNumber": "",
  "GameMode": "",
  "GameType": "",
  "GameComplexity": "",
  "Tags": [],
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "Table": "",
  "Sky": "",
  "Note": "",
  "TabStates": {},
  "LuaScript": "",
  "LuaScriptState": "",
  "XmlUI": "",
  "ObjectStates": [
    {
      "GUID": "6c2334",
      "Name": "Bag",
      "Transform": {
        "posX": -15.4948044,
        "posY": 1.12241459,
        "posZ": -4.677309,
        "rotX": 359.983124,
        "rotY": -0.00119653146,
        "rotZ": 359.9201,
        "scaleX": 2.04999924,
        "scaleY": 2.04999924,
        "scaleZ": 2.04999924
      },
      "Nickname": "harsch Scripted Objects",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 1.0,
        "g": 0.933333337,
        "b": 0.5333333
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Bag": {
        "Order": 0
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "804c02",
          "Name": "CardCustom",
          "Transform": {
            "posX": -16.055006,
            "posY": 5.766306,
            "posZ": -4.463072,
            "rotX": 359.802948,
            "rotY": 180.000122,
            "rotZ": 359.802429,
            "scaleX": 2.05722,
            "scaleY": 1.0,
            "scaleZ": 2.05722
          },
          "Nickname": "Atlas Portal",
          "Description": "",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 26800,
          "SidewaysCard": true,
          "CustomDeck": {
            "268": {
              "FaceURL": "https://steamusercontent-a.akamaihd.net/ugc/28808007229281261/F5447FE9DFDFC760E25FD7814F8BD52BF787D24D/",
              "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/28808007229281261/F5447FE9DFDFC760E25FD7814F8BD52BF787D24D/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 0
            }
          },
          "LuaScript": "-- Atlas Box scripts written by harsch.  Last update:  12-18-2024\r\n\r\ntableGUID = \"4ee1f2\"\r\natlasBoxGUID = \"f8bd3c\"\r\nedificesGUID = \"1662f7\"\r\nrelicStackGUID = \"09d477\"\r\nshadowBagGUID = \"1ce44a\"\r\nsiteBagGUID = \"12dafe\"\r\n\r\ntableObj = nil\r\natlasBox = nil\r\nedificeBag = nil\r\nrelicStack = nil\r\nshadowBag = nil\r\nsiteBag = nil\r\n\r\nsetupButtonLabel = \"Setup Initial\\nAtlas Box\\nand Sites\"\r\nretryButtonLabel = \"Fix missing objects \\n and click me \\n to retry\"\r\nstoreButtonLabel        = \"← Into Atlas Box ←\"\r\nstoreButtonLabelConfirm = \"←    Confirm?    ←\"\r\nretrieveButtonLabel = \"→ Summon a Site →\"\r\n\r\nsiteTag = \"Site\"\r\nrelicTag = \"Relic\"\r\nedificeTag = \"Edifice\"\r\nshadowTag = \"Shadow\"\r\nchronicleCreatedTag = \"chronicleCreated\"\r\nunlockedTag = \"Unlocked\"\r\n\r\nemptyAtlasSlotBagName = \"[Empty] Slot\"\r\nfullAtlasSlotBagName = \"[Full] Slot\"\r\n\r\nportalSites = {}\r\nportalRelics = {}\r\nportalEdifices = {}\r\nportalShadow = {}\r\n\r\nfunction onLoad()\r\n    setupTags()\r\n\r\n    atlasBox = getObjectFromGUID(atlasBoxGUID)\r\n    if self.hasTag(chronicleCreatedTag) then\r\n        if atlasBox == nil then\r\n            print(\"ERROR: Cannot find Atlas Box Bag by GUID\")\r\n            spawnRetryButton()\r\n            return\r\n        elseif atlasBox then\r\n            spawnAtlasButtons()\r\n            return\r\n        end\r\n    else\r\n        if checkForSetupObjects() then\r\n            spawnChronicleSetupButton()\r\n        else \r\n            spawnRetryButton()\r\n        end\r\n    end\r\nend\r\n\r\nfunction setupTags() \r\n    self.addTag(siteTag)\r\n    self.addTag(relicTag)\r\n    self.addTag(edificeTag)\r\n    self.addTag(shadowTag)\r\n    self.removeTag(siteTag)\r\n    self.removeTag(relicTag)\r\n    self.removeTag(edificeTag)\r\n    self.removeTag(shadowTag)\r\n    self.addTag(unlockedTag)\r\n    self.removeTag(unlockedTag)\r\n    if not self.hasTag(chronicleCreatedTag) then\r\n        self.addTag(chronicleCreatedTag)\r\n        self.removeTag(chronicleCreatedTag)\r\n    end\r\nend\r\n\r\nfunction checkForSetupObjects()\r\n    tableObj = getObjectFromGUID(tableGUID)\r\n    edificeBag = getObjectFromGUID(edificesGUID)\r\n    relicStack = getObjectFromGUID(relicStackGUID)\r\n    shadowBag = getObjectFromGUID(shadowBagGUID)\r\n    siteBag = getObjectFromGUID(siteBagGUID)\r\n    if tableObj == nil then print(\"ERROR: Cannot find Table by GUID\") end\r\n    if atlasBox == nil then print(\"ERROR: Cannot find Atlas Box Bag by GUID\") end\r\n    if edificeBag == nil then print(\"ERROR: Cannot find Edifices Bag by GUID\") end\r\n    if relicStack == nil then print(\"ERROR: Cannot find Relic Stack by GUID\") end\r\n    if shadowBag == nil then print(\"ERROR: Cannot find Shadow Denizens Bag by GUID\") end\r\n    if siteBag == nil then print(\"ERROR: Cannot find Site Bag\") end\r\n\r\n    if tableObj and atlasBox and edificeBag and relicStack and shadowBag and siteBag then\r\n        return true\r\n    end\r\n    return false\r\nend\r\n\r\nfunction checkForAtlasObjects()\r\n    atlasBox = getObjectFromGUID(atlasBoxGUID)\r\n    if atlasBox == nil then\r\n        print(\"ERROR: Cannot find Atlas Box Bag by GUID\")\r\n        spawnRetryButton()\r\n        return false\r\n    end\r\n    return true\r\nend\r\n\r\nfunction spawnAtlasButtons()\r\n    refreshStoreButton()\r\n    params = {\r\n        click_function = \"retrieveInit\",\r\n        function_owner = self,\r\n        label          = retrieveButtonLabel,\r\n        position       = {-1.85, 0, 0.85},\r\n        scale          = {1.0,   1.0,   2.0 },\r\n        rotation       = {0, 0, 0},\r\n        width          = 725,\r\n        height         = 400,\r\n        font_size      = 77,\r\n        color          = hexToColor(\"#588087\"),\r\n        font_color     = {1, 1, 1, 1},\r\n        tooltip        = \"Retrieve a Site and all objects there from the Atlas Box\", \r\n    }\r\n    self.createButton(params)\r\nend\r\n\r\nfunction refreshStoreButton()\r\n    stagedStorage = (#portalSites + #portalRelics + #portalEdifices + #portalShadow) > 0\r\n    removeButtonByLabel(self, storeButtonLabel)\r\n    removeButtonByLabel(self, storeButtonLabelConfirm)\r\n    params = {\r\n        click_function = \"storeInit\",\r\n        function_owner = self,\r\n        position       = {-1.85, 0, -0.85},\r\n        scale          = {1.0,   1.0,   2.0 },\r\n        rotation       = {0, 0, 0},\r\n        width          = 725,\r\n        height         = 400,\r\n        font_size      = 77,\r\n        font_color     = {1, 1, 1, 1},\r\n        label          = stagedStorage and storeButtonLabelConfirm or storeButtonLabel,\r\n        color          = stagedStorage and hexToColor(\"#4a915d\") or hexToColor(\"#588087\"),\r\n        hover_color    = stagedStorage and hexToColor(\"#58b872\") or nil,\r\n        tooltip        = stagedStorage and \"Confirm?\" or \"Move Sites, Relics, Edifices and Shadow into the Atlas box\", \r\n        \r\n    }\r\n    self.createButton(params)\r\nend\r\n\r\nfunction spawnChronicleSetupButton()\r\n    params = {\r\n        click_function = \"setupAtlasBox\",\r\n        function_owner = self,\r\n        label          = setupButtonLabel,\r\n        -- position       = {13.212, 10.561, 14.422},\r\n        position       = {0, 0, 2.6},\r\n        scale          = {1.0,   1.0, 2.0 },\r\n        rotation       = {0, 0, 0},\r\n        width          = 1000,\r\n        height         = 500,\r\n        font_size      = 130,\r\n        color          = hexToColor(\"#4a915d\"),\r\n        font_color     = {1, 1, 1, 1},\r\n        tooltip        = \"Set Up the Atlas Box for a new Chronicle\", \r\n    }\r\n    self.createButton(params)\r\nend\r\n\r\nfunction spawnRetryButton()\r\n    params = {\r\n        click_function = \"retry\",\r\n        function_owner = self,\r\n        label          = retryButtonLabel,\r\n        position       = {0, 0, 2.6},\r\n        scale          = {1.0,   1.0, 2.0 },\r\n        rotation       = {0, 0, 0},\r\n        width          = 1000,\r\n        height         = 500,\r\n        font_size      = 110,\r\n        color          = hexToColor(\"#823030\"),\r\n        font_color     = {1, 1, 1, 1},\r\n        tooltip        = \"Place missing objects and retry\", \r\n    }\r\n    self.createButton(params)\r\nend\r\n\r\nfunction retry()\r\n    removeButtonByLabel(self, retryButtonLabel)\r\n    onLoad()\r\nend\r\n\r\n--\r\n-- CHRONICLE SETUP\r\n--\r\n\r\nfunction setupAtlasBox(obj, color, alt_click)\r\n    if not alt_click then\r\n        if not checkForSetupObjects() then\r\n            removeButtonByLabel(self, setupButtonLabel)\r\n            spawnRetryButton()\r\n            return\r\n        end\r\n\r\n        if #(edificeBag.getObjects()) == 0 then\r\n            print(\"Please place all Edifices in the Edifice bag and try again.\")\r\n        else\r\n            local wasUnlocked = atlasBox.hasTag(unlockedTag)\r\n            atlasBox.addTag(unlockedTag)\r\n            for i = 1,20 do\r\n                local atlasSlotBag = atlasBox.takeObject({index = 20-i})\r\n                atlasSlotBag.putObject(getRandomSite())\r\n                local d6roll = math.random(1,6)\r\n                print(\"Slot \", (i), \", Roll \", d6roll)\r\n                if d6roll == 1 then\r\n                    atlasSlotBag.putObject(getRandomEdifice())\r\n                elseif d6roll == 3 then\r\n                    atlasSlotBag.putObject(getRandomRelic())\r\n                elseif d6roll == 4 then\r\n                    atlasSlotBag.putObject(getRandomRelic())\r\n                    atlasSlotBag.putObject(getRandomRelic())\r\n                elseif d6roll == 5 then\r\n                    atlasSlotBag.putObject(getRandomRelic())\r\n                    atlasSlotBag.putObject(getRandomShadow())\r\n                elseif d6roll == 6 then\r\n                    atlasSlotBag.putObject(getRandomRelic())\r\n                    atlasSlotBag.putObject(getRandomRelic())\r\n                    atlasSlotBag.putObject(getRandomShadow())\r\n                end\r\n                atlasSlotBag.setName(fullAtlasSlotBagName)\r\n                atlasBox.putObject(atlasSlotBag)\r\n            end\r\n            dealStartingSites()\r\n            removeButtonByLabel(self, setupButtonLabel)\r\n            self.addTag(chronicleCreatedTag)\r\n            spawnAtlasButtons()\r\n            if not wasUnlocked then atlasBox.removeTag(unlockedTag) end\r\n        end\r\n    end\r\nend\r\n\r\nfunction dealStartingSites()\r\n    relicVector = {x = 0, y = -3, z = -1.3}\r\n    relicVectorDelta = {x = 0.75, y = 0, z = 0}\r\n    for i = 1,8 do\r\n        local relicNumber = 0;\r\n        local denizenNumber = 0;\r\n        local atlasSlotBag = atlasBox.takeObject({index = 0})\r\n        for _, obj in ipairs(atlasSlotBag.getObjects()) do\r\n            if dataTableContains(obj.tags, relicTag) then\r\n                atlasSlotBag.takeObject({\r\n                    guid = obj.guid,\r\n                    position = getRelicPosition(getSitePosition(i), relicNumber),\r\n                    rotation = {x=180, y=0, z=0},\r\n                })\r\n                relicNumber = relicNumber+1\r\n            end\r\n            if dataTableContains(obj.tags, edificeTag) or dataTableContains(obj.tags, shadowTag) then\r\n                atlasSlotBag.takeObject({\r\n                    guid = obj.guid, \r\n                    position = getDenizenPosition(getSitePosition(i), denizenNumber),\r\n                    rotation = {x=180, y=0, z=0},\r\n                })\r\n                denizenNumber = denizenNumber+1\r\n            end\r\n        end\r\n        for _, obj in ipairs(atlasSlotBag.getObjects()) do\r\n            if dataTableContains(obj.tags, \"Site\") then\r\n                atlasSlotBag.takeObject({\r\n                    guid = obj.guid,\r\n                    position = getSitePosition(i),\r\n                    rotation = {x=0, y=180, z=0},\r\n                })\r\n                break\r\n            end\r\n        end\r\n        atlasSlotBag.setName(emptyAtlasSlotBagName)\r\n        atlasBox.putObject(atlasSlotBag)\r\n    end\r\nend\r\n\r\n-- Spawn Positions\r\nfunction getSitePosition(i)\r\n    siteOneXPos, siteYPos, siteOneZPos = 6.75, 5, 6\r\n    xDelta, zDelta = 20.45, -5.75\r\n    sitePositions = {\r\n        {x = siteOneXPos, y = siteYPos, z = siteOneZPos},\r\n        {x = siteOneXPos, y = siteYPos, z = siteOneZPos + zDelta},\r\n        {x = siteOneXPos + xDelta, y = siteYPos, z = siteOneZPos},\r\n        {x = siteOneXPos + xDelta, y = siteYPos, z = siteOneZPos + zDelta},\r\n        {x = siteOneXPos + xDelta, y = siteYPos, z = siteOneZPos + zDelta*2},\r\n        {x = siteOneXPos + xDelta*2+.5, y = siteYPos, z = siteOneZPos},\r\n        {x = siteOneXPos + xDelta*2+.5, y = siteYPos, z = siteOneZPos + zDelta},\r\n        {x = siteOneXPos + xDelta*2+.5, y = siteYPos, z = siteOneZPos + zDelta*2},\r\n    }\r\n    return sitePositions[i]\r\nend\r\n\r\nfunction getRelicPosition(position, relicNumber)\r\n    relicVector = {x = 0, y = -3, z = -1.3}\r\n    subsequentRelicPos = {x = 1.15*relicNumber, y = 0.25*relicNumber, z = 0}\r\n    return vectorSum(position, vectorSum(relicVector, subsequentRelicPos))\r\nend\r\n\r\nfunction getDenizenPosition(position, denizenNumber)\r\n    denizenVector = {x = 5.5, y = -3, z = 0.25}\r\n    subsequentDenizenPos = {x = 3.5*denizenNumber, y = 0, z = 0}\r\n    return vectorSum(position, vectorSum(denizenVector, subsequentDenizenPos))\r\nend\r\n\r\n-- Get Elements for creating Chronicle\r\n\r\nfunction getRandomShadow()\r\n    local shadow = getRandomObjectFromContainer(shadowBag, false)\r\n    shadow.addTag(shadowTag)\r\n    return shadow\r\nend\r\n\r\nfunction getRandomRelic()\r\n    local relic = getRandomObjectFromContainer(relicStack, false)\r\n    relic.addTag(relicTag)\r\n    return relic\r\nend\r\n\r\nfunction getRandomSite()\r\n    local site = getRandomObjectFromContainer(siteBag, false)\r\n    site.setColorTint(Color(0,0,0))\r\n    -- site.setColorTint(Color(1,1,1))\r\n    site.setRotation({x=0,y=180,z=0})\r\n    site.addTag(\"Site\")\r\n    return site\r\nend\r\n\r\nfunction getRandomEdifice()\r\n    local cardOrDeck = getRandomObjectFromContainer(edificeBag, true)\r\n\r\n    -- Someone may have put the edifices in as a deck. If they have, remove the deck and add each individual card back to the bag (and take a card afterwards).\r\n    if cardOrDeck.type == \"Deck\" then\r\n        local deckSize = #cardOrDeck.getObjects()\r\n        local lastCard = nil\r\n        for index, containedObject in ipairs(cardOrDeck.getObjects()) do\r\n            if index < deckSize then\r\n                edificeBag.putObject(cardOrDeck.takeObject({guid = containedObject.guid}))\r\n                lastCard = cardOrDeck.remainder\r\n            else\r\n                edificeBag.putObject(lastCard)\r\n            end\r\n        end\r\n        cardOrDeck = getRandomObjectFromContainer(edificeBag, true)\r\n    end\r\n\r\n    cardOrDeck.addTag(edificeTag)\r\n    return cardOrDeck\r\nend\r\n\r\n--\r\n-- ATLAS BOX STORAGE\r\n-- \r\n\r\nfunction storeInit()\r\n    if checkForAtlasObjects() then\r\n        createStoringZone()\r\n    end\r\nend\r\n\r\nfunction createStoringZone()\r\n    createPortalZone(store)\r\nend\r\n\r\nfunction createPortalZone(callback)\r\n    cardSize = self.getVisualBoundsNormalized()[\"size\"]\r\n    spawnObject({\r\n        type = \"FogOfWarTrigger\",\r\n        -- position = {0,-10,0},\r\n        position = vectorSum(self.getPosition(), {x = 0, y = 100, z = 0}),\r\n        scale = {cardSize[\"x\"], 200, cardSize[\"z\"]},\r\n        sound = false,\r\n        callback_function = function(spawned_object)\r\n            -- spawned_object.setPosition(self.getPosition())\r\n            spawned_object.setColorTint(hexToColor(\"#ff00ff\"))\r\n            -- Wait.time(function() store(spawned_object) end, 0.10)\r\n            Wait.time(function()\r\n                callback(spawned_object)\r\n                destroyObject(spawned_object)\r\n            end, 0.10)\r\n            \r\n        end\r\n    })\r\nend\r\n\r\nfunction store(zone)\r\n    -- First time we validate the objects and check with the user\r\n    if #portalSites == 0 and #portalRelics == 0 and #portalEdifices == 0 and #portalShadow == 0 then\r\n        for _, obj in ipairs(zone.getObjects(true)) do\r\n            if obj.hasTag(siteTag) then table.insert(portalSites, obj) end\r\n            if obj.hasTag(relicTag) then table.insert(portalRelics, obj) end\r\n            if obj.hasTag(edificeTag) then table.insert(portalEdifices, obj) end\r\n            if obj.hasTag(shadowTag) then table.insert(portalShadow, obj) end\r\n        end\r\n        messageParts = {}\r\n        if #portalSites > 0 then table.insert(messageParts, #portalSites .. \" Site\") end\r\n        if #portalRelics > 0 then table.insert(messageParts, #portalRelics .. \" Relic(s)\") end    \r\n        if #portalEdifices > 0 then table.insert(messageParts, #portalEdifices .. \" Edifice\") end\r\n        if #portalShadow > 0 then table.insert(messageParts, #portalShadow .. \" Shadow\") end\r\n        if #messageParts > 0 then\r\n            print(\"Detected \" .. table.concat(messageParts, \", \") .. \" on the Atlas Portal.\")\r\n            if #portalSites < 1 then\r\n                print(\"ERROR: Missing a Site. Try again after placing a Site on the Atlas Portal.\\n\")\r\n                emptyStoredPortalObjs()\r\n                return\r\n            end\r\n            if #portalSites > 1 then\r\n                print(\"ERROR: Too many Sites. Try again after removing Sites from the Atlas Portal until there is only one.\\n\")\r\n                emptyStoredPortalObjs()\r\n                return\r\n            end\r\n            if #portalRelics > 3 then\r\n                print(\"ERROR: More than 3 Relics. Try again after removing some Relics from the Atlas Portal.\\n\")\r\n                emptyStoredPortalObjs()\r\n                return\r\n            end\r\n            if #portalEdifices > 1 then\r\n                print(\"More than 1 Edifice. This is not typical but may be an exceptionalcase with current rules.\")\r\n            end\r\n            if #portalShadow > 1 then\r\n                print(\"More than 1 Shadow. This is not typical but may be an exceptional case with current rules.\")\r\n            end\r\n            refreshStoreButton()\r\n            print(\"Click the send button again to confirm.\\n\")\r\n            return\r\n        else\r\n            print(\"No objects on the Atlas Portal to send.\\n\")\r\n            return\r\n        end\r\n    -- Subsequent times we actually store the objects into the atlasbox\r\n    else\r\n        -- check for all objects matching\r\n        local perfectMatch = true\r\n        local itemCount = #portalSites + #portalRelics + #portalEdifices + #portalShadow\r\n        for _, obj in ipairs(zone.getObjects(true)) do\r\n            if obj.hasTag(siteTag) then\r\n                perfectMatch = dataTableContains(portalSites, obj)\r\n                itemCount = itemCount - 1 \r\n            end\r\n            if obj.hasTag(relicTag) then\r\n                perfectMatch = dataTableContains(portalRelics, obj)\r\n                itemCount = itemCount - 1 \r\n            end\r\n            if obj.hasTag(edificeTag) then\r\n                perfectMatch = dataTableContains(portalEdifices, obj)\r\n                itemCount = itemCount - 1 \r\n            end\r\n            if obj.hasTag(shadowTag) then\r\n                perfectMatch = dataTableContains(portalShadow, obj)\r\n                itemCount = itemCount - 1 \r\n            end\r\n            if not perfectMatch then break end\r\n        end\r\n        if itemCount > 0 or not perfectMatch then \r\n            print(\"ERROR: Objects on the Atlas Portal have changed since the last button press. Aborting storage.\\n\")\r\n            emptyStoredPortalObjs()\r\n            return\r\n        end\r\n\r\n        local foundEmptyBag = false\r\n        local wasUnlocked = atlasBox.hasTag(unlockedTag)\r\n        atlasBox.addTag(unlockedTag)\r\n        for i = 1, 20 do\r\n            atlasSlotBag = atlasBox.takeObject({index = 0})\r\n            if not foundEmptyBag and #atlasSlotBag.getObjects() == 0 then\r\n                foundEmptyBag = true\r\n                for _, obj in ipairs(portalSites) do\r\n                    obj.setColorTint(Color(0,0,0))\r\n                    atlasSlotBag.putObject(obj)\r\n                end\r\n                for _, obj in ipairs(portalRelics) do atlasSlotBag.putObject(obj) end\r\n                for _, obj in ipairs(portalEdifices) do atlasSlotBag.putObject(obj) end\r\n                for _, obj in ipairs(portalShadow) do atlasSlotBag.putObject(obj) end\r\n                atlasSlotBag.setName(fullAtlasSlotBagName)\r\n                print(\"Stored objects in Slot number \", i, \"\\n\")\r\n            end\r\n            atlasBox.putObject(atlasSlotBag)\r\n        end\r\n        if not wasUnlocked then atlasBox.removeTag(unlockedTag) end\r\n        emptyStoredPortalObjs()\r\n    end\r\nend\r\n\r\nfunction emptyStoredPortalObjs()\r\n    portalSites = {}\r\n    portalRelics = {}\r\n    portalEdifices = {}\r\n    portalShadow = {}\r\n    refreshStoreButton()\r\nend\r\n\r\n--\r\n-- ATLAS BOX RETRIEVAL\r\n-- \r\n\r\nfunction retrieveInit()\r\n    if checkForAtlasObjects() then\r\n        checkRetrievalZone()\r\n    end\r\nend\r\n\r\nfunction checkRetrievalZone()\r\n    createPortalZone(retrieve)\r\nend\r\n\r\nfunction retrieve(zone)\r\n    if #portalSites + #portalEdifices + #portalRelics + #portalShadow > 0 then\r\n        print(\"ERROR: Cannot Summon while storing sites\\n\")\r\n        return\r\n    end\r\n    for _, obj in ipairs(zone.getObjects(true)) do\r\n        if obj.hasTag(siteTag) or obj.hasTag(relicTag) or obj.hasTag(edificeTag) or obj.hasTag(shadowTag) then\r\n            print(\"ERROR: Cannot Summon while pieces are on the Portal\\n\")\r\n            return\r\n        end\r\n    end\r\n    self.setLock(true)\r\n\r\n    local d6roll = math.random(1,6)\r\n    local heldBag = nil\r\n    local spawnPosition = vectorSum(self.getPosition(), {x = 0, y = 5, z= 0})\r\n    local wasUnlocked = atlasBox.hasTag(unlockedTag)\r\n    relicNumber, denizenNumber, edificeCount, shadowCount = 0, 0, 0, 0\r\n    atlasBox.addTag(unlockedTag)\r\n    for i, obj in ipairs(atlasBox.getObjects()) do\r\n        local atlasSlotBag = atlasBox.takeObject({index = 0})\r\n        if i == d6roll then\r\n            heldBag = atlasSlotBag\r\n            for _, obj in ipairs(atlasSlotBag.getObjects()) do\r\n                if dataTableContains(obj.tags, relicTag) then\r\n                    atlasSlotBag.takeObject({\r\n                        guid = obj.guid,\r\n                        position = getRelicPosition(spawnPosition, relicNumber),\r\n                        rotation = {x=180, y=0, z=0},\r\n                    })\r\n                    relicNumber = relicNumber+1\r\n                end\r\n                if dataTableContains(obj.tags, shadowTag) then\r\n                    atlasSlotBag.takeObject({\r\n                        guid = obj.guid, \r\n                        position = getDenizenPosition(spawnPosition, denizenNumber),\r\n                        rotation = {x=180, y=0, z=0},\r\n                    })\r\n                    denizenNumber = denizenNumber+1\r\n                    shadowCount = shadowCount+1\r\n                end\r\n            end\r\n            for _, obj in ipairs(atlasSlotBag.getObjects()) do\r\n                \r\n                if dataTableContains(obj.tags, edificeTag) then\r\n                    atlasSlotBag.takeObject({\r\n                        guid = obj.guid, \r\n                        position = getDenizenPosition(spawnPosition, denizenNumber),\r\n                        rotation = {x=180, y=0, z=0},\r\n                    })\r\n                    denizenNumber = denizenNumber+1\r\n                    edificeCount = edificeCount+1\r\n                end\r\n                if dataTableContains(obj.tags, siteTag) then\r\n                    atlasSlotBag.takeObject({\r\n                        guid = obj.guid,\r\n                        position = spawnPosition,\r\n                        rotation = {x=0, y=180, z=0},\r\n                    })\r\n                    break\r\n                end\r\n            end\r\n            atlasSlotBag.setName(emptyAtlasSlotBagName)\r\n        else\r\n            atlasBox.putObject(atlasSlotBag)\r\n        end\r\n    end\r\n    messageParts = {}\r\n    if relicNumber > 0 then table.insert(messageParts, relicNumber .. \" Relic(s)\") end    \r\n    if edificeCount > 0 then table.insert(messageParts, edificeCount .. \" Edifice\") end\r\n    if shadowCount > 0 then table.insert(messageParts, shadowCount .. \" Shadow\") end\r\n    if #messageParts > 0 then\r\n        print(\"Summoning Site from Slot \" .. d6roll .. \" with \" .. table.concat(messageParts, \", \") .. \"\\n\")\r\n    else\r\n        print(\"Summoning Empty Site from Slot \" .. d6roll .. \"\\n\")\r\n\r\n    end\r\n    atlasBox.putObject(heldBag)\r\n    if not wasUnlocked then atlasBox.removeTag(unlockedTag) end\r\n\r\n\r\n\r\nend\r\n\r\n-- Override Site Flip\r\nfunction onPlayerAction(player, action, targets)\r\n    if action == Player.Action.FlipOver and #targets == 1 and targets[1].hasTag(\"Site\") then\r\n        if targets[1].getColorTint() == Color(0,0,0) then\r\n            targets[1].setColorTint(Color(1,1,1))\r\n        else\r\n            targets[1].setColorTint(Color(0,0,0))\r\n        end\r\n        return false\r\n    end\r\n    return true\r\nend\r\n\r\n\r\n-- Util\r\n\r\nfunction hexToColor(hex)\r\n    -- Remove the \"#\" if it exists\r\n    hex = hex:gsub(\"#\", \"\")\r\n\r\n    -- Convert each pair of hex digits to decimal and then to float\r\n    local r = tonumber(hex:sub(1, 2), 16) / 255\r\n    local g = tonumber(hex:sub(3, 4), 16) / 255\r\n    local b = tonumber(hex:sub(5, 6), 16) / 255\r\n\r\n    -- Return the RGB values as floats\r\n    return Color(r, g, b)\r\nend\r\n\r\nfunction dataTableContains(table, x)\r\n    found = false\r\n    for _, obj in ipairs(table) do\r\n        if obj == x then found = true end\r\n    end\r\n    return found\r\nend\r\n\r\nfunction removeButtonByLabel(holder, label)\r\n    local buttonIndex = nil\r\n    for i,button in ipairs(holder.getButtons()) do\r\n        if button.label == label then\r\n            buttonIndex = button.index\r\n            break\r\n        end\r\n    end\r\n    if buttonIndex then holder.removeButton(buttonIndex) end\r\nend\r\n\r\nfunction getButtonByLabel(holder, label)\r\n    local buttonIndex = nil\r\n    for i,button in ipairs(holder.getButtons()) do\r\n        if button.label == label then\r\n            return button\r\n        end\r\n    end\r\nend\r\n\r\nfunction getRandomObjectFromContainer(container, flipped)\r\n    return container.takeObject({\r\n        guid = container.getObjects()[math.random(1, #container.getObjects())].guid,\r\n        position = vectorSum(container.getPosition(), {x = 0, y = 5, z = 0}),\r\n        rotation = flipped and vectorSum({x = 180, y = 180, z = 0},container.getRotation()) or container.getRotation(),\r\n    })\r\nend\r\n\r\nfunction vectorSum(v1, v2)\r\n    return {\r\n        x = v1.x + v2.x,\r\n        y = v1.y + v2.y,\r\n        z = v1.z + v2.z\r\n    }\r\nend",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        {
          "GUID": "1662f7",
          "Name": "Bag",
          "Transform": {
            "posX": -15.5010481,
            "posY": 5.56855965,
            "posZ": -4.656483,
            "rotX": 0.0773074,
            "rotY": -0.0009422289,
            "rotZ": 359.9852,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Edifices",
          "Description": "",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 0.358797044,
            "g": 0.6184669,
            "b": 0.4099588
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "Number": 0,
          "Bag": {
            "Order": 0
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        {
          "GUID": "f8bd3c",
          "Name": "Bag",
          "Transform": {
            "posX": -15.5888929,
            "posY": 5.46864128,
            "posZ": -5.31282473,
            "rotX": 359.8923,
            "rotY": 0.000591784366,
            "rotZ": 359.985657,
            "scaleX": 1.59999955,
            "scaleY": 1.59999955,
            "scaleZ": 1.59999955
          },
          "Nickname": "Atlas Box",
          "Description": "",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 0.67770046,
            "g": 0.67770046,
            "b": 0.67770046
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "Bag": {
            "Order": 0
          },
          "LuaScript": "\r\nunlockedTag = \"Unlocked\"\r\n\r\nfunction onLoad()\r\n    if not self.hasTag(unlockedTag) then\r\n        self.addTag(unlockedTag)\r\n        self.removeTag(unlockedTag)\r\n    end\r\nend\r\n\r\nfunction tryObjectEnter(object)\r\n    if self.hasTag(unlockedTag) then\r\n        return true\r\n    else\r\n        print(\"Atlas Box manipulation is handled by scripting using the Atlas Portal.\\nIf you really want to manually change things, change tags on the Atlas Box to remove its lock.\\n\")\r\n        return false\r\n    end\r\nend\r\n\r\nfunction tryRandomize(object)\r\n    if self.hasTag(unlockedTag) then\r\n        return true\r\n    else\r\n        return false\r\n    end\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container == self and not self.hasTag(unlockedTag) then\r\n        print(\"Atlas Box manipulation is handled by scripting using the Atlas Portal.\\nIf you really want to manually change things, change tags on the Atlas Box to remove its lock.\\n\")\r\n        container.putObject(leave_object)\r\n    end\r\nend",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "7b484f",
              "Name": "Bag",
              "Transform": {
                "posX": -41.4765472,
                "posY": 4.696099,
                "posZ": 32.7888374,
                "rotX": 0.00656287046,
                "rotY": 0.0009024543,
                "rotZ": 359.8957,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "99d0f9",
              "Name": "Bag",
              "Transform": {
                "posX": -41.8683929,
                "posY": 4.57117,
                "posZ": 34.1334267,
                "rotX": 0.9352343,
                "rotY": 0.221122175,
                "rotZ": 359.4627,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "f795c3",
              "Name": "Bag",
              "Transform": {
                "posX": -42.7924767,
                "posY": 4.64655447,
                "posZ": 33.72571,
                "rotX": 1.22445261,
                "rotY": 0.0581493638,
                "rotZ": 0.7312224,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "26ef45",
              "Name": "Bag",
              "Transform": {
                "posX": -41.7415733,
                "posY": 4.66936159,
                "posZ": 32.00074,
                "rotX": 359.2556,
                "rotY": 0.024130974,
                "rotZ": 359.469025,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "a1c747",
              "Name": "Bag",
              "Transform": {
                "posX": -42.34868,
                "posY": 4.67330742,
                "posZ": 33.1911774,
                "rotX": 1.06419754,
                "rotY": 359.9938,
                "rotZ": 0.299086034,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "d7a330",
              "Name": "Bag",
              "Transform": {
                "posX": -41.3728676,
                "posY": 4.656127,
                "posZ": 31.6486168,
                "rotX": 358.956116,
                "rotY": 359.977173,
                "rotZ": 359.023956,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "c39624",
              "Name": "Bag",
              "Transform": {
                "posX": -43.07346,
                "posY": 4.6493907,
                "posZ": 35.6919136,
                "rotX": 359.993958,
                "rotY": 0.000177531139,
                "rotZ": 359.9714,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "85e558",
              "Name": "Bag",
              "Transform": {
                "posX": -38.6090736,
                "posY": 4.643236,
                "posZ": 35.9200935,
                "rotX": 359.993958,
                "rotY": 0.00015262494,
                "rotZ": 359.9714,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "78c5c6",
              "Name": "Bag",
              "Transform": {
                "posX": -34.6980553,
                "posY": 4.637818,
                "posZ": 36.0414238,
                "rotX": 359.993958,
                "rotY": 0.000114232556,
                "rotZ": 359.9714,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "b5fc6b",
              "Name": "Bag",
              "Transform": {
                "posX": -39.2423935,
                "posY": 4.642937,
                "posZ": 31.6261158,
                "rotX": 359.993958,
                "rotY": 0.000131961118,
                "rotZ": 359.9714,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "30d4dd",
              "Name": "Bag",
              "Transform": {
                "posX": -33.6074181,
                "posY": 4.63496971,
                "posZ": 32.03716,
                "rotX": -0.00353791472,
                "rotY": 7.28549E-05,
                "rotZ": 359.983246,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "c5ae7e",
              "Name": "Bag",
              "Transform": {
                "posX": -41.41177,
                "posY": 4.68143463,
                "posZ": 33.3553352,
                "rotX": 0.418790668,
                "rotY": 359.9901,
                "rotZ": 359.474731,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "5f8e99",
              "Name": "Bag",
              "Transform": {
                "posX": -42.7063446,
                "posY": 4.672351,
                "posZ": 32.746685,
                "rotX": 0.1865668,
                "rotY": -0.00084073277,
                "rotZ": 1.14595878,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "3fafb5",
              "Name": "Bag",
              "Transform": {
                "posX": -43.4019737,
                "posY": 4.618706,
                "posZ": 33.4155159,
                "rotX": 0.86017853,
                "rotY": 359.880035,
                "rotZ": 1.15941191,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "a8d1b1",
              "Name": "Bag",
              "Transform": {
                "posX": -39.26044,
                "posY": 4.59285355,
                "posZ": 33.58525,
                "rotX": 359.993958,
                "rotY": 0.000302069267,
                "rotZ": 359.9714,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "5766c3",
              "Name": "Bag",
              "Transform": {
                "posX": -34.85233,
                "posY": 4.5863595,
                "posZ": 33.1881065,
                "rotX": -0.00354026281,
                "rotY": 0.000110414563,
                "rotZ": 359.983246,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "514df4",
              "Name": "Bag",
              "Transform": {
                "posX": -31.3307915,
                "posY": 4.58179235,
                "posZ": 33.5566177,
                "rotX": 359.993958,
                "rotY": 0.000267102965,
                "rotZ": 359.9714,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "63e413",
              "Name": "Bag",
              "Transform": {
                "posX": -28.2326241,
                "posY": 4.577128,
                "posZ": 33.1802521,
                "rotX": -0.00354092359,
                "rotY": 0.000149494808,
                "rotZ": 359.983246,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "9744e2",
              "Name": "Bag",
              "Transform": {
                "posX": -42.322422,
                "posY": 4.59577942,
                "posZ": 29.8161144,
                "rotX": -0.00353951845,
                "rotY": 0.000191216139,
                "rotZ": 359.983246,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            },
            {
              "GUID": "4a91a8",
              "Name": "Bag",
              "Transform": {
                "posX": -38.5143623,
                "posY": 4.59049034,
                "posZ": 29.88548,
                "rotX": -0.00353902532,
                "rotY": 0.000142710967,
                "rotZ": 359.983246,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Atlas Box Slot",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "Number": 0,
              "Bag": {
                "Order": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ]
    }
  ]
}